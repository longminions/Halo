# -------------------------
# Gateway application
# -------------------------
spring.application.name=gateway
server.port=8080
spring.main.web-application-type=reactive

# -------------------------
# JWT (env override supported)
# -------------------------
jwt.secret=${JWT_SECRET:K8TAc2q3NMYwF3r1WsC6IY8k0xdr+D2B3z9xLG2Q2lE=}
jwt.expiration=${JWT_EXPIRATION:3600000}
jwt.algorithm=HS256

# -------------------------
# Disable discovery (we do NOT use Eureka)
# -------------------------
spring.cloud.discovery.enabled=false
# remove or ignore any eureka.* properties if you're not using eureka

# -------------------------
# Actuator (useful to inspect routes)
# -------------------------
management.endpoints.web.exposure.include=gateway,health,info
management.endpoint.gateway.enabled=true
management.endpoint.health.show-details=always

# -------------------------
# Gateway Routes (NO EUREKA, direct URIs)
# - user-service on http://localhost:8082
# - product-service on http://localhost:8083
# - csv-upload on http://localhost:8081
# - auth/login proxied to user-service (8082)
# -------------------------

# USER SERVICE
spring.cloud.gateway.routes[0].id=user-service
spring.cloud.gateway.routes[0].uri=http://localhost:8082
spring.cloud.gateway.routes[0].predicates[0].name=Path
spring.cloud.gateway.routes[0].predicates[0].args.pattern=/users/**
spring.cloud.gateway.routes[0].filters[0].name=StripPrefix
spring.cloud.gateway.routes[0].filters[0].args.parts=1

# PRODUCT SERVICE
spring.cloud.gateway.routes[1].id=product-service
spring.cloud.gateway.routes[1].uri=http://localhost:8083
spring.cloud.gateway.routes[1].predicates[0].name=Path
spring.cloud.gateway.routes[1].predicates[0].args.pattern=/products/**
spring.cloud.gateway.routes[1].filters[0].name=StripPrefix
spring.cloud.gateway.routes[1].filters[0].args.parts=1

# CSV UPLOAD SERVICE
spring.cloud.gateway.routes[2].id=csv-upload
spring.cloud.gateway.routes[2].uri=http://localhost:8081
spring.cloud.gateway.routes[2].predicates[0].name=Path
spring.cloud.gateway.routes[2].predicates[0].args.pattern=/api/csv/**
spring.cloud.gateway.routes[2].filters[0].name=RemoveRequestHeader
spring.cloud.gateway.routes[2].filters[0].args.name=Content-Length
spring.cloud.gateway.routes[2].filters[1].name=RemoveRequestHeader
spring.cloud.gateway.routes[2].filters[1].args.name=Transfer-Encoding

# AUTH / LOGIN (forward login through gateway so filter runs)
spring.cloud.gateway.routes[3].id=auth-login
spring.cloud.gateway.routes[3].uri=http://localhost:8082
spring.cloud.gateway.routes[3].predicates[0].name=Path
spring.cloud.gateway.routes[3].predicates[0].args.pattern=/auth/login
spring.cloud.gateway.routes[3].filters[0].name=StripPrefix
spring.cloud.gateway.routes[3].filters[0].args.parts=1

# no stripprefix here; set to 0 if you need exact path forwarded

# -------------------------
# Optional: DB config (gateway usually doesn't need DB)
# Remove if gateway has no DB usage
# -------------------------
spring.datasource.url=jdbc:postgresql://localhost:5432/longtv
spring.datasource.username=longtv
spring.datasource.password=09052001

spring.cloud.zookeeper.enabled=false
spring.cloud.zookeeper.config.enabled=false
spring.cloud.zookeeper.discovery.enabled=false
spring.cloud.zookeeper.connect-string=

management.endpoints.web.base-path=/actuator
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO




